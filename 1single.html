---
title: 1. Single file
layout: page
---
<input id="photo" type="file">
<div id="results"></div>

<script type="module">
  import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

  const photoInput = document.getElementById("photo");
  const resultsDiv = document.getElementById("results");

  async function predict(file) {
    // 1. CHANGE: Show the image IMMEDIATELY so it doesn't look stalled
    resultsDiv.innerHTML = `
      <img src="${URL.createObjectURL(file)}" width="300">
      <h1>Analyzing...</h1>
    `;

    try {
      // 2. CHANGE: Connect and Predict using the official library
      const app = await Client.connect("jayk1p/tinypets");
      const result = await app.predict("/predict", [file]);

      // 3. CHANGE: Logic to turn True/False into Cat/Dog
      let raw = result.data[0].label;
      let breed = raw === "True" ? "Cat" : raw === "False" ? "Dog" : raw;

      resultsDiv.innerHTML = `
        <img src="${URL.createObjectURL(file)}" width="300">
        <h1>It's a ${breed}!</h1>
      `;
    } catch (e) {
      resultsDiv.innerHTML += "<p>Error: " + e.message + "</p>";
    }
  }

  photoInput.onchange = () => {
    const file = photoInput.files[0];
    if (file) predict(file);
  }
</script>
